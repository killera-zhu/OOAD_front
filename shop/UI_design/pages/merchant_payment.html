<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <title>商户管理 - 支付管理</title>
  <link rel="stylesheet" href="../style.css">
  <style>
    .tabs { display:flex; border-bottom:2px solid #ccc; margin-bottom:20px; }
    .tab { padding:10px 20px; cursor:pointer; font-weight:600; color:#555; }
    .tab.active { color:#1976d2; border-bottom:3px solid #1976d2; }
    .tab-content { display:none; }
    .tab-content.active { display:block; animation: fadeIn 0.3s; }

    table { width:100%; border-collapse: collapse; margin-top:10px; }
    th, td { border-bottom:1px solid #ddd; padding:10px; text-align:left; }
    th { background:#f9f9f9; }

    .btn { background-color:#1976d2; color:white; border:none; padding:6px 12px; border-radius:6px; cursor:pointer; font-size:14px; margin-right:4px; }
    .btn:hover { background-color:#1565c0; }

    .modal { position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.3); display:none; align-items:center; justify-content:center; }
    .modal-content { background:white; padding:20px; border-radius:10px; width:450px; max-height:80vh; overflow-y:auto; }
    label { display:block; margin-top:10px; }
  </style>
</head>
<body>
  <header>
    <div>商户管理系统</div>
    <nav>
      <a href="../index.html">首页</a>
      <a href="#">帮助</a>
    </nav>
  </header>

  <div class="container">
    <aside class="sidebar">
      <a href="../index.html">返回仪表盘</a>
      <a href="merchant_staff.html">管理人员</a>
      <a href="merchant_service.html">管理服务</a>
      <a href="merchant_provider.html">管理服务商</a>
      <a href="#" class="active">管理支付</a>
      <a href="merchant_after_sales.html">管理售后</a>
    </aside>

    <main class="main">
      <h2>管理支付</h2>

      <!-- 标签页 -->
      <div class="tabs">
        <div class="tab active" onclick="switchTab(0)">查询支付</div>
        <div class="tab" onclick="switchTab(1)">查询退款</div>
      </div>

 <!-- 查询支付 -->
<div class="tab-content active">
  <div class="toolbar">
    <input type="text" id="searchPayment" placeholder="输入订单号/顾客姓名/状态/时间" style="width:400px;">
    <button class="btn" onclick="queryPayment()">查询</button>
  </div>
  <table id="paymentTable">
    <thead>
      <tr>
        <th>订单号</th>
        <th>支付金额</th>
        <th>支付时间</th>
        <th>支付状态</th>
        <th>支付方式</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>OD2025001</td>
        <td>￥1999</td>
        <td>2025-10-20</td>
        <td>已支付</td>
        <td>支付宝</td>
        <td><button class="btn" onclick="openModal('paymentModal','OD2025001')">查看详情</button></td>
      </tr>
    </tbody>
  </table>
</div>

<!-- 弹窗：支付详情 -->
<div class="modal" id="paymentModal">
  <div class="modal-content">
    <h3>支付详情</h3>
    <p><strong>订单号：</strong><span id="paymentId"></span></p>
    <p><strong>支付金额：</strong>￥1999</p>
    <p><strong>支付时间：</strong>2025-10-20</p>
    <p><strong>支付状态：</strong>已支付</p>
    <p><strong>支付方式：</strong>支付宝</p>
    <p><strong>交易流水号：</strong>TR20250001</p>
    <p><strong>支付渠道：</strong>线上支付平台</p>
    <div style="text-align:right;margin-top:15px;">
      <button class="btn" onclick="closeModal('paymentModal')">关闭</button>
    </div>
  </div>
</div>

<!-- 查询退款 -->
<div class="tab-content">
  <div class="toolbar">
    <input type="text" id="searchRefund" placeholder="输入订单号/顾客姓名/状态/时间" style="width:400px;">
    <button class="btn" onclick="queryRefund()">查询</button>
  </div>
  <table id="refundTable">
    <thead>
      <tr>
        <th>订单号</th>
        <th>退款金额</th>
        <th>退款时间</th>
        <th>退款状态</th>
        <th>退款方式</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>OD2025002</td>
        <td>￥1999</td>
        <td>2025-10-22</td>
        <td>已退款</td>
        <td>微信支付</td>
        <td><button class="btn" onclick="openModal('refundModal','OD2025002')">查看详情</button></td>
      </tr>
    </tbody>
  </table>
</div>

<!-- 弹窗：退款详情 -->
<div class="modal" id="refundModal">
  <div class="modal-content">
    <h3>退款详情</h3>
    <p><strong>订单号：</strong><span id="refundId"></span></p>
    <p><strong>退款金额：</strong>￥1999</p>
    <p><strong>退款时间：</strong>2025-10-22</p>
    <p><strong>退款状态：</strong>已退款</p>
    <p><strong>退款方式：</strong>微信支付</p>
    <p><strong>退款原因：</strong>商品破损</p>
    <p><strong>交易流水号：</strong>RF20250002</p>
    <div style="text-align:right;margin-top:15px;">
      <button class="btn" onclick="closeModal('refundModal')">关闭</button>
    </div>
  </div>
</div>

  <script src="../script.js"></script>
  <script>
    function switchTab(idx){
      document.querySelectorAll('.tab').forEach((t,i)=>t.classList.toggle('active',i===idx));
      document.querySelectorAll('.tab-content').forEach((c,i)=>c.classList.toggle('active',i===idx));
    }

    function queryPayment(){ alert('模拟查询支付记录'); }
    function queryRefund(){ alert('模拟查询退款记录'); }

    function openModal(id, recordId){
      document.getElementById(id).style.display='flex';
      if(id==='paymentModal') document.getElementById('paymentId').textContent = recordId;
      if(id==='refundModal') document.getElementById('refundId').textContent = recordId;
    }
    function closeModal(id){ document.getElementById(id).style.display='none'; }
  </script>
</body>
</html>
