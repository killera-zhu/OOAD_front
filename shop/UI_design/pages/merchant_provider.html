<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <title>商户管理 - 服务商与服务合同</title>
  <link rel="stylesheet" href="../style.css">
  <style>
    .tabs {
      display: flex;
      border-bottom: 2px solid #ccc;
      margin-bottom: 20px;
    }
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      font-weight: 600;
      color: #555;
    }
    .tab.active {
      color: #1976d2;
      border-bottom: 3px solid #1976d2;
    }
    .tab-content { display: none; }
    .tab-content.active { display: block; animation: fadeIn 0.3s; }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border-bottom: 1px solid #ddd;
      padding: 10px;
      text-align: left;
    }
    th { background: #f9f9f9; }

    .btn { 
      background-color: #1976d2; color:white; border:none;
      padding:6px 12px; border-radius:6px; cursor:pointer;
      font-size:14px; margin-right:4px;
    }
    .btn:hover { background-color:#1565c0; }
    .btn-danger { background:#d32f2f; }
    .btn-danger:hover { background:#b71c1c; }

    .modal {
      position: fixed; top:0; left:0; right:0; bottom:0;
      background: rgba(0,0,0,0.3);
      display: none; align-items:center; justify-content:center;
    }
    .modal-content {
      background:white; padding:20px; border-radius:10px;
      width:450px; max-height:80vh; overflow-y:auto;
    }
    label { display:block; margin-top:10px; }
    input, textarea, select { width:100%; padding:6px; margin-top:4px; }
  </style>
</head>
<body>
  <header>
    <div>商户管理系统</div>
    <nav>
      <a href="../index.html">首页</a>
      <a href="#">帮助</a>
    </nav>
  </header>

  <div class="container">
    <aside class="sidebar">
      <a href="../index.html">返回仪表盘</a>
      <a href="merchant_staff.html">管理人员</a>
      <a href="merchant_service.html">管理服务</a>
      <a href="#" class="active">管理服务商</a>
      <a href="merchant_payment.html">管理支付</a>
      <a href="merchant_after_sales.html">管理售后</a>
    </aside>

    <main class="main">
      <h2>管理服务商与合同</h2>

      <!-- 标签页 -->
      <div class="tabs">
        <div class="tab active" onclick="switchTab(0)">服务商信息</div>
        <div class="tab" onclick="switchTab(1)">服务合同管理</div>
      </div>

      <!-- 服务商信息 TAB -->
      <div class="tab-content active">
        <div class="toolbar">
          <input type="text" id="searchProvider" placeholder="输入服务商名称 / 商品类型 / 地区">
          <button class="btn" onclick="queryProvider()">查询</button>
        </div>

        <table id="providerTable">
          <thead>
            <tr>
              <th>服务商名称</th>
              <th>服务商品类型</th>
              <th>服务地区</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>优品服务有限公司</td>
              <td>电子产品维修</td>
              <td>上海</td>
              <td><button class="btn" onclick="viewProviderDetail('优品服务有限公司')">查看详情</button></td>
            </tr>
            <tr>
              <td>智诚科技服务</td>
              <td>家电安装</td>
              <td>广州</td>
              <td><button class="btn" onclick="viewProviderDetail('智诚科技服务')">查看详情</button></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- 服务合同 TAB -->
      <div class="tab-content">
        <div class="toolbar">
          <input type="text" id="searchContract" placeholder="输入服务商名称 / 服务名称 / 地区">
          <button class="btn" onclick="queryContract()">查询合同</button>
          <button class="btn" onclick="openContractModal('new')">+ 新建合同</button>
        </div>

        <table id="contractTable">
          <thead>
            <tr>
              <th>合同编号</th>
              <th>服务商名称</th>
              <th>服务名称</th>
              <th>服务地区</th>
              <th>服务期限</th>
              <th>状态</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>CT2025001</td>
              <td>优品服务有限公司</td>
              <td>家电维修</td>
              <td>上海</td>
              <td>2025-01-01 至 2025-12-31</td>
              <td>生效中</td>
              <td>
                <button class="btn" onclick="pauseContract(this)">暂停</button>
                <button class="btn btn-danger" onclick="cancelContract(this)">取消</button>
              </td>
            </tr>
            <tr>
              <td>CT2025002</td>
              <td>智诚科技服务</td>
              <td>电子安装</td>
              <td>广州</td>
              <td>2025-03-01 至 2026-03-01</td>
              <td>暂停</td>
              <td>
                <button class="btn" onclick="resumeContract(this)">恢复</button>
                <button class="btn btn-danger" onclick="cancelContract(this)">取消</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>
  </div>

  <!-- 弹窗：服务商详情 -->
  <div class="modal" id="providerModal">
    <div class="modal-content">
      <h3>服务商详情</h3>
      <p><strong>服务商名称：</strong><span id="provName"></span></p>
      <p><strong>服务商品类型：</strong> 电子产品维修</p>
      <p><strong>服务地区：</strong> 上海</p>
      <p><strong>联系人：</strong> 王经理（13800001111）</p>
      <p><strong>联系地址：</strong> 上海市浦东新区张江路88号</p>
      <p><strong>服务资质证明：</strong> 已上传</p>
      <p><strong>简介：</strong> 专注售后维修十年，服务覆盖全国多个城市。</p>
      <div style="text-align:right;margin-top:15px;">
        <button class="btn btn-danger" onclick="closeModal('providerModal')">关闭</button>
      </div>
    </div>
  </div>

  <!-- 弹窗：新建/编辑合同 -->
  <div class="modal" id="contractModal">
    <div class="modal-content">
      <h3 id="contractModalTitle">新建服务合同</h3>
      <label>服务商名称：<input type="text" id="contractProvider"></label>
      <label>服务名称：<input type="text" id="contractService"></label>
      <label>服务地区：<input type="text" id="contractArea"></label>
      <label>服务期限：<input type="text" id="contractDuration" placeholder="如 2025-01-01 至 2025-12-31"></label>
      <label>合同条款：<textarea rows="4" id="contractTerms"></textarea></label>
      <div style="text-align:right;margin-top:15px;">
        <button class="btn" onclick="saveContract()">保存</button>
        <button class="btn btn-danger" onclick="closeModal('contractModal')">取消</button>
      </div>
    </div>
  </div>

  <script src="../script.js"></script>
  <script>
    function switchTab(idx) {
      document.querySelectorAll('.tab').forEach((t,i)=>t.classList.toggle('active',i===idx));
      document.querySelectorAll('.tab-content').forEach((c,i)=>c.classList.toggle('active',i===idx));
    }

    function queryProvider() { alert("模拟查询服务商"); }
    function viewProviderDetail(name) {
      document.getElementById('provName').textContent = name;
      document.getElementById('providerModal').style.display='flex';
    }
    function closeModal(id){ document.getElementById(id).style.display='none'; }

    function queryContract() { alert("模拟查询合同"); }
    function openContractModal(type){ 
      document.getElementById('contractModal').style.display='flex';
      document.getElementById('contractModalTitle').textContent = type==='new'?'新建服务合同':'修改服务合同';
    }
    function saveContract(){ alert("合同保存成功"); closeModal('contractModal'); }

    function pauseContract(btn){ 
      const row = btn.closest('tr');
      row.cells[5].textContent='暂停';
      btn.outerHTML='<button class="btn" onclick="resumeContract(this)">恢复</button>';
      alert('合同已暂停');
    }
    function resumeContract(btn){ 
      const row = btn.closest('tr');
      row.cells[5].textContent='生效中';
      btn.outerHTML='<button class="btn" onclick="pauseContract(this)">暂停</button>';
      alert('合同已恢复');
    }
    function cancelContract(btn){ 
      if(confirm("确定要取消该合同吗？")){ 
        btn.closest('tr').remove(); 
        alert("合同已取消"); 
      }
    }
  </script>
</body>
</html>
